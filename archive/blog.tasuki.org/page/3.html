<!DOCTYPE html>
<html lang="en"><head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#C60">
  <link rel="icon" href="../favicon.svg">

  
  <title>tasuki’s blog</title>
  

  <link rel="stylesheet" href="../public/pure-min.css">
  <link rel="stylesheet" href="../public/pure-grids-responsive-min.css">
  <link rel="stylesheet" href="../public/style.css">
</head>
<body>
    <div id="header">
      <div class="pad">
        <a href="../index.html">tasuki’s blog</a>
      </div>
    </div>
    <div id="content" class="pad">
      
  
  <article>
  <h1>
  
  <a href="../common-addictions/index.html">Common addictions</a>
  
  </h1>
  <div class="meta">
    <span class="date">2021-03-11</span>
  </div>
  <div class="content">
    <p>
Many items of daily use have exactly the opposite effect to what’s desired. One’s body gets used to the thing, and then can’t do without, exacerbating any problems one might have started with.
</p>
<p>
In my particular case, the <a href="https://en.wikipedia.org/wiki/Lip_balm">lip balm</a> has been the worst offender. I started using lip balm quite young, my lips were dry and a lip balm immediately made me feel better. At some point during my use, my lips switched from becoming dry to simply burning. Suddenly, I had to apply the lip balm all the time, otherwise I’d get an immediate burning sensation. This was very annoying, but oh well, I just took a lip balm with me everywhere. Then one day it dawned on me that other people didn’t have this problem. I tried different lip balms, to no avail. Then one day, I stopped using lip balm. Within two days, the burning sensation turned into the much more bearable dry lips. After ceasing usage, my lips became ok after a week.
</p>
<p>
Things of daily use for which I’ve developed an addiction and managed to get rid of it:
</p>
<ul>
<li>
Lip balm – the worst, avoid!
</li>
<li>
Nasal spray – I blame it for my prolonged colds. Perhaps three years ago, girlfriend told me not to use nasal spray when I had a cold, and I suffered a little at the beginning, but went through the cold quicker and I haven’t had much of a cold since. Coincidence? I don’t know…
</li>
<li>
Antiperspirant – Used one for one summer, smelled like a dead cat whenever I forgot to use it for a day. Afterwards, reeked for weeks. Never again.
</li>
<li>
Shampoo – I had to wash my hair every day otherwise my head would become oily and itchy. Some years ago on a yacht, Regina told a story about a woman who stopped shampooing her hair. I tried the same with great success: now that I only wash my head with warm water, it no longer feels the need to produce as much oil. Mind, I’m still bald.
</li>
</ul>
<p>
Things I have not developed an addiction for:
</p>
<ul>
<li>
Hand lotion – If you use hand lotion, I’ll show you my hands. You can admire the silkiness. I never use gloves when dealing with aggressive detergents etc.
</li>
<li>
That’s it! Can’t think of anything else I’m not addicted to. I’ll amend this later if I come up with something!
</li>
</ul>
<p>
[This blog post brought to you by Diana. Diana said I should write a blog!]
</p>
  </div>

  
</article>

  
  <article>
  <h1>
  
  <a href="../make-gnome-on-ubuntu-20-04-usable/index.html">Make Gnome on Ubuntu 20.04 usable</a>
  
  </h1>
  <div class="meta">
    <span class="date">2020-10-06</span>
  </div>
  <div class="content">
    <p>
Back when I hated Unity, I wrote down <a href="../make-ubuntu-unity-usable-in-five-simple-steps/index.html">some steps to make it nicer</a>. Well I’m still on Ubuntu (which might change soon – snaps suck), and these days like to hate on Gnome.
</p>
<p>
I’ve since <a href="https://github.com/tasuki/dotrc/blob/master/.Xmodmap">moved some settings to config files</a>, but most of the setup is still manual and will keep evolving as Gnome keeps breaking things.
</p>
<p>
Start by installing <code>gnome-tweak-tool</code>. Under “Windows”, choose “Focus on Hover”, perhaps tweak some other settings, and then install the Extensions.
</p>
<p>
Gnome ignores <code>~/.xsession</code>, <code>~/.xinitrc</code> etc, so under “Keyboard &amp; Mouse”, choose “Additional Layout Options” and “Ctrl position” and “Swap Ctrl and Caps Lock”. Also “Switching to another layout”, “Two shifts together”.
</p>
<p>
Must have, without these I’d off Gnome:
</p>
<ul>
<li>
<a href="https://extensions.gnome.org/extension/1485/workspace-matrix/">Workspace Matrix</a> – my virtual desktops must be in a grid. In settings, select “Show workspace grid in the overview”.
</li>
<li>
<a href="https://extensions.gnome.org/extension/2015/no-title-bar-forked/">No Title Bar – Forked</a> – Vertical space is precious, don’t take it away from me. There used to be “Pixel Saver”, then “No Title Bar”, and now “No Title Bar - Forked”. Gnome keeps breaking things, extension developers can’t keep up.
</li>
<li>
<a href="https://extensions.gnome.org/extension/3010/system-monitor-next/">System Monitor Next</a> – I really need to see what my system is doing. Same story as above, there are many versions, most no longer work.
</li>
</ul>
<p>
Nice to have:
</p>
<ul>
<li>
<a href="https://extensions.gnome.org/extension/779/clipboard-indicator/">Clipboard Indicator</a> – what it says on the box.
</li>
<li>
<a href="https://extensions.gnome.org/extension/800/remove-dropdown-arrows/">Remove Dropdown Arrows</a> – they’re useless and when there are too many things the whole bar gets messed up.
</li>
<li>
<a href="https://extensions.gnome.org/extension/1011/dynamic-panel-transparency/">Dynamic Panel Transparency</a> – hey it looks nice.
</li>
</ul>
  </div>

  
</article>

  
  <article>
  <h1>
  
  <a href="../sleep/index.html">Sleep</a>
  
  </h1>
  <div class="meta">
    <span class="date">2020-09-17</span>
  </div>
  <div class="content">
    <p>
I’ve been having trouble with insomnia for several years. It came in waves, a couple weeks it was better, a couple weeks worse. I’ve been using a sleep tracking app to keep track of how bad I slept. I’d look at it and analyze everything and feel sorry for myself.
</p>
<p>
Say it was like 3 years and say I spent on average 2 hours a night not being able to sleep. That’d be over 2000 hours lost, and that’s probably a conservative estimate.
</p>
<p>
I always knew one had to get up regularly, but haven’t been doing it since probably 2012. I’d try to limit blue-light in the evening, and did all kinds of things which are tangential to good sleep. Anything but regular sleep schedule!
</p>
<p>
About two weeks ago I decided enough was enough, deleted the sleep tracking app, set up a “dumb” alarm for 7:07 every day of the week, and reduced total time in bed to something uncomfortably short (around six and half hours). For the past week I’ve been sleeping great, all thanks to these two things. I still have trouble getting up at 7:07, but that’s a short moment of discomfort compared to hours of insomnia.
</p>
<p>
There’s <a href="https://insomniasos.net/">a wonderful page describing how to sleep better</a>. I didn’t even need to do all that much to cure my terrible insomnia – just the basic basics helped almost immediately. I wonder, how else can I easily drastically improve my quality of life?
</p>
  </div>

  
</article>

  
  <article>
  <h1>
  
  <a href="../the-joy-of-elm/index.html">The joy of Elm</a>
  
  </h1>
  <div class="meta">
    <span class="date">2020-05-02</span>
  </div>
  <div class="content">
    <p>
<a href="https://elm-lang.org/">Elm</a> is a purely functional programming language for creating web frontend. It is strongly typed, largely influenced by Haskell – without some of the things that make Haskell difficult for newcomers, and with much better error messages.
</p>
<p>
I’ve recently written two small (~2k lines total) side projects in Elm. Writing code in Elm is an absolute joy:
</p>
<ul>
<li>
It’s <a href="https://guide.elm-lang.org/">easy to get started</a> and Elm is a simple language.
</li>
<li>
Very strong typing – seems somewhat stronger than in Haskell. Eg <code>List.head</code> is of type <code>List a -&gt; Maybe a</code> and won’t crash on you in runtime – if the list is empty you get <code>Nothing</code>. If it compiles it usually works.
</li>
<li>
Elm has amazing error messages. They don’t just tell you what’s wrong, they try to explain why that could be and suggest how you could try to fix the error. I have never before encountered errors this helpful.
</li>
<li>
There’s <a href="https://ellie-app.com/">Ellie – a wonderful online environment to play around and share snippets</a>.
</li>
<li>
The <a href="https://elmlang.slack.com/">Elm Slack</a> is the most helpful and responsive community I’ve ever participated in.
</li>
<li>
Refactoring is a breeze – it compiles it works. I’ve never had a refactoring mess up things that worked before.
</li>
<li>
Yes Elm compiles to JavaScript, and I’ve never had to dive into the generated code.
</li>
</ul>
<p>
That said, there are some potential drawbacks:
</p>
<ul>
<li>
No higher kinded polymorphism: to map over a <code>List</code>, you need to use <code>List.map</code>, to map over <code>Set</code>, use <code>Set.map</code>. This is slightly verbose and sucks for the library developers, but isn’t a big problem for the end user.
</li>
<li>
Elm-land is an autocracy. Evan has been a very enlightened ruler, so this could also be seen as a benefit.
</li>
<li>
The development of Elm itself is intentionally slow: they try to get it right rather than get it out quick. Some things one would like in the standard library are external libraries. The <a href="https://package.elm-lang.org/">repository of Elm packages</a> is rather comprehensive.
</li>
</ul>
  </div>

  
</article>

  
  <article>
  <h1>
  
  <a href="../set-dns-server-in-ubuntu-20-04-focal-fossa/index.html">Set DNS server in Ubuntu 20.04 Focal Fossa</a>
  
  </h1>
  <div class="meta">
    <span class="date">2020-05-01</span>
  </div>
  <div class="content">
    <p>
Set contents of <code>/etc/systemd/resolved.conf</code> to:
</p>
<pre>[Resolve]
DNS=45.90.28.239 45.90.30.239
Domains=~.</pre>
<p>
Apparently spaces are separators. Those are <a href="https://nextdns.io/">NextDNS</a> servers in the example btw. NextDNS has not sponsored this post.
</p>
<p>
Then run: <code>$ sudo service systemd-resolved restart</code>
</p>
<p>
This was one of about two hundred million things that took me too long to figure out while setting up Ubuntu 20.04.
</p>
<hr>
<p>
And in case you want to <a href="https://github.com/systemd/systemd/issues/2514#issuecomment-179203186">resolve single-label lookups, <code>systemd-resolved</code> don’t do that</a>.
</p>
<ul>
<li>
<code>apt install dnsmasq resolvconf</code>
</li>
<li>
Set <code>/etc/dnsmasq.conf</code> config, eg values from <a href="https://my.nextdns.io/">my.nextdns.io</a>
</li>
<li>
<a href="https://askubuntu.com/a/899338">Disable <code>systemd-resolved</code></a>
</li>
<li>
Set <code>dns=dnsmasq</code> in <code>/etc/NetworkManager/NetworkManager.conf</code>
</li>
<li>
Set <code>nameserver 127.0.0.1</code> in <code>/etc/resolvconf/resolv.conf.d/base</code>
</li>
<li>
Restart all teh things
</li>
</ul>

  </div>

  
</article>

  
  <article>
  <h1>
  
  <a href="../three-years-of-cold-showers/index.html">Three years of cold showers</a>
  
  </h1>
  <div class="meta">
    <span class="date">2019-10-20</span>
  </div>
  <div class="content">
    <p>
I don’t start my showers cold, but always end them so. I start the shower warm, then switch to hot, then at the end as cold as possible for about half a minute. In the beginning it was mildly uncomfortable, but I’ve become accustomed to it quickly. Showering in different places, I’m often surprised at the range of different temperatures of the coldest water available.
</p>
<p>
A cold shower really wakes you up. It closes your pores, which is good for the skin, and prevents heat loss. <em>After</em> a cold shower, you’ll always feel great about yourself.
</p>
<p>
Interestingly, ending with cold showers is perhaps the only positive habit I’ve built recently. I usually find forming habits challenging. This one didn’t require much work at all – usually I’m good at finding excuses, the easiest one being “I don’t have time for this”, which doesn’t apply here. Yes, I do have half a minute (and so do you, you’re reading this after all).
</p>
  </div>

  
</article>

  
  <article>
  <h1>
  
  <a href="../one-year-with-scala/index.html">One year with Scala</a>
  
  </h1>
  <div class="meta">
    <span class="date">2017-06-01</span>
  </div>
  <div class="content">
    <p>
This is gonna be rambling personal experience. You have been warned.
</p>
<p>
A year ago I took a break from my work at <a href="https://inviqa.com/">Inviqa</a> to learn Scala and functional programming. This has been a great decision, a most successful endeavour, and an amazing learning experience.
</p>
<p>
I’ve been stuck with PHP for a long time. Mind, at Inviqa we were doing as good PHP as one can. I learned lots about software engineering from a multitude of conference speakers and industry leaders. This was further helped by a very active learning &amp; development department and a generous conference/learning budget. Still, it was PHP. The language sucks.
</p>
<p>
Learning Scala as a “better Java” kind of language was easy. Case classes, options, lots of easy wins. Learning functional programming… well, I’ve been reading the awesome <a href="https://www.manning.com/books/functional-programming-in-scala">Functional Programming in Scala</a> book, and I’m still reading it one year later. Despite its hands-on approach and lots of hand-holding, it’s not easy for me to digest. Functional programming is hard.
</p>
<p>
I used to really like Python. I wrote about 50 lines of Python recently, and just couldn’t believe how difficult it was. One needs to explicitly write <tt>return</tt> to return values. When just trying things out, you don’t get quick feedback from the compiler. Either write tests or <em>run your code</em> – the former seemed like overdoing it for such a short program, the latter was tedious. Working with the collections was a pain.
</p>
<p>
Let’s have a look at an example. What we want to do: <strong>split a string on commas, then strip whitespace from each element</strong>.
</p>
<p>
In Python:<br />
<tt><code>map(lambda i: i.strip(), re.split(‘,’, string))</code></tt>
</p>
<p>
In Scala:<br />
<tt><code>string.split(“,”).map(_.trim)</code></tt>
</p>
<p>
The relative conciseness of Scala is nice, sure, but the Scala code basically follows the instructions: take a string, split on a comma, trim whitespace. Python is completely cryptic in comparison.
</p>
<p>
The main drawback of Scala is not the language but the ecosystem. SBT (Scala Build Tool) is powerful but often times incomprehensible. The compilation can be slow at times. Scala’s Play Framework is not nearly as polished as PHP’s Symfony. Replacing any piece of Symfony is just a dependency injection away. Replacing a component of Play is bordering on impossible, everything depends on everything and is mostly hardcoded. I wanted to do a really simple one-line change in Play Framework routing but had to give up.
</p>
<p>
Inviqa didn’t have as much interest in Scala as I hoped, so regrettably, I stopped working for them. Now I’m part of <a href="http://www.kwiqjobs.com/">KwiqJobs</a> (soon to be Swarms Technologies), an amazing startup. We turn people’s waiting time into a new resource for companies. Our tech team works remotely and we meet about once a month for a week. It’s lots of fun! Also we’re hiring! :)
</p>
  </div>

  
</article>

  
  <article>
  <h1>
  
  <a href="../listmap-in-scala/index.html">ListMap in Scala</a>
  
  </h1>
  <div class="meta">
    <span class="date">2017-05-17</span>
  </div>
  <div class="content">
    <p>
You probably don’t want to use a <tt><a href="http://www.scala-lang.org/api/current/scala/collection/mutable/ListMap.html">ListMap</a></tt>. It has an interface of a <tt>Map</tt>, but is “powered” (that’s too good a word) by a <tt>List</tt>. Thus pretty much any <tt>Map</tt> operations you call on it will take ages. Consider using a <tt><a href="http://www.scala-lang.org/api/current/scala/collection/mutable/LinkedHashMap.html">LinkedHashMap</a></tt> instead – it will preserve both the element order and your sanity.
</p>
<p>
That’s me trying to blog more.
</p>
  </div>

  
</article>

  
  <article>
  <h1>
  
  <a href="../mysql-low-cardinality-index-efficiency/index.html">MySQL low cardinality index efficiency</a>
  
  </h1>
  <div class="meta">
    <span class="date">2016-11-28</span>
  </div>
  <div class="content">
    <p>I’ve heard the opinion that indexes on low cardinality columns don’t work well. I set out to disprove that.</p>

<p>First, let’s create a table with a boolean column <em>“active”</em> and fill it with dummy data. Please note it includes a (default, B-Tree) index on the <em>“active”</em> column.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> <span class="k">show</span> <span class="k">create</span> <span class="k">table</span> <span class="n">users</span><span class="err">\</span><span class="k">G</span>
<span class="o">***************************</span> <span class="mi">1</span><span class="p">.</span> <span class="k">row</span> <span class="o">***************************</span>
<span class="k">Table</span><span class="p">:</span> <span class="n">users</span>
<span class="k">Create</span> <span class="k">Table</span><span class="p">:</span> <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="nv">`users`</span> <span class="p">(</span>
<span class="nv">`id`</span> <span class="nb">int</span><span class="p">(</span><span class="mi">11</span><span class="p">)</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="n">AUTO_INCREMENT</span><span class="p">,</span>
<span class="nv">`name`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="nv">`email`</span> <span class="nb">varchar</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="nv">`active`</span> <span class="nb">tinyint</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">DEFAULT</span> <span class="k">NULL</span><span class="p">,</span>
<span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nv">`id`</span><span class="p">),</span>
<span class="k">KEY</span> <span class="nv">`active`</span> <span class="p">(</span><span class="nv">`active`</span><span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span><span class="o">=</span><span class="n">InnoDB</span> <span class="k">DEFAULT</span> <span class="n">CHARSET</span><span class="o">=</span><span class="n">latin1</span>
<span class="mi">1</span> <span class="k">row</span> <span class="k">in</span> <span class="k">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>

<span class="o">&gt;</span> <span class="k">DELIMITER</span> <span class="p">;;</span>
<span class="o">&gt;</span> <span class="k">CREATE</span> <span class="k">PROCEDURE</span> <span class="n">insert_random</span><span class="p">(</span><span class="k">IN</span> <span class="n">amount</span> <span class="nb">INT</span><span class="p">,</span> <span class="k">IN</span> <span class="n">percent_active</span> <span class="nb">INT</span><span class="p">)</span>
    <span class="o">-&gt;</span> <span class="k">BEGIN</span>
    <span class="o">-&gt;</span>   <span class="k">DECLARE</span> <span class="n">counter</span> <span class="nb">INT</span> <span class="k">DEFAULT</span> <span class="mi">0</span><span class="p">;</span>
    <span class="o">-&gt;</span>   <span class="n">myloop</span><span class="p">:</span> <span class="n">LOOP</span>
    <span class="o">-&gt;</span>     <span class="n">if</span> <span class="p">(</span><span class="n">counter</span> <span class="o">=</span> <span class="n">amount</span><span class="p">)</span> <span class="k">THEN</span>
    <span class="o">-&gt;</span>       <span class="n">LEAVE</span> <span class="n">myloop</span><span class="p">;</span>
    <span class="o">-&gt;</span>     <span class="k">end</span> <span class="n">if</span><span class="p">;</span>
    <span class="o">-&gt;</span>     <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">users</span> <span class="k">SET</span>
    <span class="o">-&gt;</span>       <span class="n">name</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(),</span>
    <span class="o">-&gt;</span>       <span class="n">email</span> <span class="o">=</span> <span class="n">UUID</span><span class="p">(),</span>
    <span class="o">-&gt;</span>       <span class="n">active</span> <span class="o">=</span> <span class="n">IF</span><span class="p">(</span><span class="n">FLOOR</span><span class="p">(</span><span class="n">RAND</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">percent_active</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="o">-&gt;</span>     <span class="k">SET</span> <span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
    <span class="o">-&gt;</span>   <span class="k">END</span> <span class="n">LOOP</span><span class="p">;</span>
    <span class="o">-&gt;</span> <span class="k">END</span> <span class="p">;;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="k">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>

<span class="o">&gt;</span> <span class="k">DELIMITER</span> <span class="p">;</span>

<span class="o">&gt;</span> <span class="k">call</span> <span class="n">insert_random</span><span class="p">(</span><span class="mi">1000000</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">1</span> <span class="k">row</span> <span class="n">affected</span> <span class="p">(</span><span class="mi">36</span><span class="p">.</span><span class="mi">60</span> <span class="n">sec</span><span class="p">)</span>

<span class="o">&gt;</span> <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">users</span><span class="p">;</span>
<span class="o">+</span><span class="c1">----------+</span>
<span class="o">|</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------+</span>
<span class="o">|</span>  <span class="mi">1000000</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------+</span>
<span class="mi">1</span> <span class="k">row</span> <span class="k">in</span> <span class="k">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">18</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div></div>

<p>We’ve inserted a million users into our table! That took some time. Please note the 0.18 seconds to count them all.</p>

<p>Now, let’s see how fast we can count the active users:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">users</span> <span class="k">where</span> <span class="n">active</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="o">+</span><span class="c1">----------+</span>
<span class="o">|</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------+</span>
<span class="o">|</span>    <span class="mi">99887</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------+</span>
<span class="mi">1</span> <span class="k">row</span> <span class="k">in</span> <span class="k">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">04</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div></div>

<p>Cool, pretty fast. Can you explain that?</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> <span class="k">explain</span> <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">users</span> <span class="k">where</span> <span class="n">active</span> <span class="o">=</span> <span class="k">true</span><span class="err">\</span><span class="k">G</span>
<span class="o">***************************</span> <span class="mi">1</span><span class="p">.</span> <span class="k">row</span> <span class="o">***************************</span>
           <span class="n">id</span><span class="p">:</span> <span class="mi">1</span>
  <span class="n">select_type</span><span class="p">:</span> <span class="k">SIMPLE</span>
        <span class="k">table</span><span class="p">:</span> <span class="n">users</span>
   <span class="n">partitions</span><span class="p">:</span> <span class="k">NULL</span>
         <span class="k">type</span><span class="p">:</span> <span class="k">ref</span>
<span class="n">possible_keys</span><span class="p">:</span> <span class="n">active</span>
          <span class="k">key</span><span class="p">:</span> <span class="n">active</span>
      <span class="n">key_len</span><span class="p">:</span> <span class="mi">2</span>
          <span class="k">ref</span><span class="p">:</span> <span class="n">const</span>
         <span class="k">rows</span><span class="p">:</span> <span class="mi">208462</span>
     <span class="n">filtered</span><span class="p">:</span> <span class="mi">100</span><span class="p">.</span><span class="mi">00</span>
        <span class="n">Extra</span><span class="p">:</span> <span class="k">Using</span> <span class="k">index</span>
<span class="mi">1</span> <span class="k">row</span> <span class="k">in</span> <span class="k">set</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div></div>

<p>Now let’s drop the index and run the test again:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> <span class="k">alter</span> <span class="k">table</span> <span class="n">users</span> <span class="k">drop</span> <span class="k">key</span> <span class="n">active</span><span class="p">;</span>
<span class="n">Query</span> <span class="n">OK</span><span class="p">,</span> <span class="mi">0</span> <span class="k">rows</span> <span class="n">affected</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">05</span> <span class="n">sec</span><span class="p">)</span>
<span class="n">Records</span><span class="p">:</span> <span class="mi">0</span>  <span class="n">Duplicates</span><span class="p">:</span> <span class="mi">0</span>  <span class="n">Warnings</span><span class="p">:</span> <span class="mi">0</span>

<span class="o">&gt;</span> <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">users</span> <span class="k">where</span> <span class="n">active</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>
<span class="o">+</span><span class="c1">----------+</span>
<span class="o">|</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------+</span>
<span class="o">|</span>    <span class="mi">99887</span> <span class="o">|</span>
<span class="o">+</span><span class="c1">----------+</span>
<span class="mi">1</span> <span class="k">row</span> <span class="k">in</span> <span class="k">set</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">24</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div></div>

<p>Wow, a lot slower… I’ve ran the selects a couple of times with consistent results to verify no caching was influencing the results. Let’s see the explain:</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;</span> <span class="k">explain</span> <span class="k">select</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">from</span> <span class="n">users</span> <span class="k">where</span> <span class="n">active</span> <span class="o">=</span> <span class="k">true</span><span class="err">\</span><span class="k">G</span>
<span class="o">***************************</span> <span class="mi">1</span><span class="p">.</span> <span class="k">row</span> <span class="o">***************************</span>
           <span class="n">id</span><span class="p">:</span> <span class="mi">1</span>
  <span class="n">select_type</span><span class="p">:</span> <span class="k">SIMPLE</span>
        <span class="k">table</span><span class="p">:</span> <span class="n">users</span>
   <span class="n">partitions</span><span class="p">:</span> <span class="k">NULL</span>
         <span class="k">type</span><span class="p">:</span> <span class="k">ALL</span>
<span class="n">possible_keys</span><span class="p">:</span> <span class="k">NULL</span>
          <span class="k">key</span><span class="p">:</span> <span class="k">NULL</span>
      <span class="n">key_len</span><span class="p">:</span> <span class="k">NULL</span>
          <span class="k">ref</span><span class="p">:</span> <span class="k">NULL</span>
         <span class="k">rows</span><span class="p">:</span> <span class="mi">912236</span>
     <span class="n">filtered</span><span class="p">:</span> <span class="mi">10</span><span class="p">.</span><span class="mi">00</span>
        <span class="n">Extra</span><span class="p">:</span> <span class="k">Using</span> <span class="k">where</span>
<span class="mi">1</span> <span class="k">row</span> <span class="k">in</span> <span class="k">set</span><span class="p">,</span> <span class="mi">1</span> <span class="n">warning</span> <span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="n">sec</span><span class="p">)</span>
</code></pre></div></div>

<p>As you hopefully know: <em>“Using index”</em> good, <em>“Using where”</em> bad.</p>

<p><strong>TL;DR A boolean column consisting of 10% TRUE and 90% FALSE queried for TRUE values using an index takes 0.04 sec, while not using an index takes 0.24 sec. The index speeds up the query by about a factor of six.</strong></p>

<p>I’ve repeated the test with worse case scenario of a binary column split 50/50. 50% true, 50% false. The numbers are a bit less consistent, but generally around 0.16 for the indexed version and 0.24 for the unindexed version. <em>Go indexes!</em></p>

  </div>

  
</article>

  
  <article>
  <h1>
  
  <a href="../on-urls/index.html">On URLs</a>
  
  </h1>
  <div class="meta">
    <span class="date">2016-05-06</span>
  </div>
  <div class="content">
    <p>
People don’t pay any attention to URLs. Recently, a highly intelligent friend of mine inadverently posted the following link on Facebook: https://www.givingwhatwecan.org/get-involved/how-rich-am-i/?country=NLD&amp;income=56000&amp;adults=1&amp;children=0
</p>
<p>
URLs are the building blocks of the world wide web. When a website changes its URLs, you get those nasty 404 errors. It would be good if website maintainers paid a little more attention to that.
</p>
<p>
As a website user, when you’re sharing a URL, look at it briefly. Does it actually contain the information you want it to contain? Can other people view this URL? Pro tip: use incognito mode to find out. Does it include superfluous information you were not intending to share? E.g. when searching google, you can easily end up with URLs such as https://www.google.com/search?q=previous+search#q=current+search
</p>
<p>
Keep URLs simple &amp; working. Look at them briefly when sharing. It’s no rocket science.
</p>
  </div>

  
</article>
<div id="pagination" class="pure-g">
  <div class="older pure-u-1-1 pure-u-sm-1-3">
  
    <a href="4.html">&laquo; Older posts</a>
  
  </div>

  <div class="page-number pure-u-1-1 pure-u-sm-1-3">
    Page: 3 of 24
  </div>

  <div class="newer pure-u-1-1 pure-u-sm-1-3">
  
    <a href="2.html">Newer posts &raquo;</a>
  
  </div>
</div>

    </div>
  </body>
</html>
